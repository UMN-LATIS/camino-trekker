var Pe=Object.defineProperty,Ne=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var ve=(e,t,o)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,me=(e,t)=>{for(var o in t||(t={}))Ee.call(t,o)&&ve(e,o,t[o]);if(de)for(var o of de(t))qe.call(t,o)&&ve(e,o,t[o]);return e},ge=(e,t)=>Ne(e,Be(t));import{r as z,o as r,c as $,a as he,b as k,d as le,e as c,F as w,f as M,g as h,w as y,h as R,t as f,i as b,j as i,k as m,u as H,l as P,m as l,p as E,n as q,q as Oe,s as C,v as F,y as L,x as ee,z as S,A as ce,B as N,C as He,D as be,E as O,G as ue,H as Fe,I as te,J as ze,K as U,L as Ue,M as De,N as je,O as Ge,R as Ve,P as Je,Q as Ke,S as We,T as Ze,U as Xe,V as Ye,W as Qe,X as et,Y as tt,Z as ot,_ as st,$ as at}from"./vendor.3d735b57.js";const nt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}};nt();var g=(e,t)=>{const o=e.__vccOpts||e;for(const[s,a]of t)o[s]=a;return o};const rt={};function lt(e,t){const o=z("router-view");return r(),$(o)}var ct=g(rt,[["render",lt]]),Q=(...e)=>t=>e.reduce((o,s)=>s(o),t);const{VITE_MAPBOX_ACCESS_TOKEN:ut,VITE_API_BASE_URL:fe}={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoiam9obnNvanIiLCJhIjoiY2t5MzdwMmFmMHNiNDJvbzBrZTlpaWRndiJ9.QL88g10hiKLOLz6ohLcuow",VITE_API_BASE_URL:"https://cla-camino-dev.oit.umn.edu",BASE_URL:"/camino-trekker/",MODE:"production",DEV:!1,PROD:!0};var B={apiBaseUrl:fe,imageStorageBase:`${fe}/storage`,mapBox:{accessToken:ut}};const Z=[],ie={get(e){return he(`${B.apiBaseUrl}/api/tour/${e}`).then(Q(...Z)).then(t=>t.data).catch(console.error)},applyMiddlewares(e){return Q(...Z)(e)},list(){return he(`${B.apiBaseUrl}/api/tours`).then(Q(...Z)).then(e=>e.data).catch(console.error)},use(e){Z.push(e)}};function it([e,t],o){const a=JSON.stringify(o).replace(new RegExp(`"${e}":`,"g"),`"${t}":`);return JSON.parse(a)}function _t(e){const t=it(["English","en"],e.data);return ge(me({},e),{data:t})}ie.use(_t);const pt={class:"home-page container"},dt=i("h1",null,"Camino",-1),vt={key:0},mt={setup(e){const t=k([]);return le(async()=>{t.value=await ie.list()}),(o,s)=>{const a=z("router-link");return r(),c("div",pt,[dt,t.value.length?(r(),c("ul",vt,[(r(!0),c(w,null,M(t.value,n=>(r(),c("li",{key:n.id},[h(a,{to:`/tours/${n.id}/stops/0`},{default:y(()=>[R(f(n.title),1)]),_:2},1032,["to"])]))),128))])):b("",!0)])}}};var gt=e=>e.charAt(0).toUpperCase()+e.slice(1);const ht=e=>e.type==="navigation",ft=e=>e.stop_content.stages.filter(ht),yt=e=>e.flatMap(t=>t.route);var St=e=>e.stops.map(o=>{const s=ft(o);return yt(s)}),$t=e=>{const t=e.start_location,o=xe("type","navigation",e).map(s=>s.targetPoint);return[t,...o]};const X=e=>(t,o)=>e(t,o),Y=e=>t=>t[e];var re=e=>{if(!Array.isArray(e))throw Error(`listOfLngLats is not an array ${JSON.stringify(e)}`);const t=e.map(Y("lng")).reduce(X(Math.min),1/0),o=e.map(Y("lat")).reduce(X(Math.min),1/0),s=e.map(Y("lng")).reduce(X(Math.max),-1/0),a=e.map(Y("lat")).reduce(X(Math.max),-1/0);return[[t,o],[s,a]]},bt=(e,t,o)=>o.stop_content.stages.filter(s=>s[e]===t),xe=(e,t,o)=>o.stops.flatMap(s=>bt(e,t,s)),xt=e=>{const o=xe("type","navigation",e).flatMap(s=>s.route);return[e.start_location,...o]};const D=()=>{const e=H();return{tour:m(()=>e.state.tour)}},j=()=>{const e=H();return{stopIndex:m(()=>e.getters.stopIndex)}},G=()=>{const e=H();return{locale:m(()=>e.state.locale),setLocale:t=>e.dispatch("setLocale",t)}},kt=()=>({accessToken:m(()=>B.mapBox.accessToken)}),It=()=>{const{tour:e}=D();return{tourLocales:m(()=>e.value.tour_content.languages)}};var Lt="/camino-trekker/assets/umn-logo.b8420373.svg";const Tt=e=>(E("data-v-f4c1c422"),e=e(),q(),e),wt={class:"app-header container"},Mt=["src"],Rt=Tt(()=>i("h1",null,"Camino",-1)),At={setup(e){return(t,o)=>(r(),c("header",wt,[P(t.$slots,"default",{},()=>[i("img",{src:l(Lt),alt:"University of Minnesota"},null,8,Mt),Rt],!0)]))}};var Ct=g(At,[["__scopeId","data-v-f4c1c422"]]);const Pt=e=>(E("data-v-2271b65e"),e=e(),q(),e),Nt={class:"progress-indicator"},Bt=Pt(()=>i("span",{class:"item__dot material-icons"},"circle",-1)),Et={class:"item__index"},qt={props:{total:{type:Number,required:!0},active:{type:Number,required:!0}},setup(e){const t=e,o=m(()=>Oe(t.total)),s=a=>a===t.active;return(a,n)=>(r(),c("ol",Nt,[(r(!0),c(w,null,M(l(o),(u,p)=>(r(),c("li",{key:p,class:C(["item",{"item--is-active":s(p)}])},[Bt,i("span",Et,f(p===0?"Start":p+1),1)],2))),128))]))}};var Ot=g(qt,[["__scopeId","data-v-2271b65e"]]);const ke=e=>(E("data-v-b6b0298c"),e=e(),q(),e),Ht={class:"sheet__inner"},Ft={class:"sheet__header"},zt={class:"sheet__title"},Ut=ke(()=>i("span",{class:"material-icons"},"close",-1)),Dt=ke(()=>i("span",{class:"sr-only"},"Close",-1)),jt=[Ut,Dt],Gt={class:"sheet__body"},Vt=R("Sheet Contents"),Jt={props:{title:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["close"],setup(e){return(t,o)=>(r(),c("aside",{class:C(["sheet",{"sheet--is-open":e.isOpen}])},[i("div",Ht,[i("header",Ft,[i("h2",zt,f(e.title),1),i("button",{class:"sheet__close-button",onClick:o[0]||(o[0]=s=>t.$emit("close"))},jt)]),i("div",Gt,[P(t.$slots,"default",{},()=>[Vt],!0)])])],2))}};var _e=g(Jt,[["__scopeId","data-v-b6b0298c"]]);const Kt={props:{center:F({lng:L().isRequired,lat:L().isRequired}).isRequired,zoom:L().isRequired,bounds:ee(ee(L())),mapStyle:S().def("streets"),accessToken:S().isRequired},setup(e){const t=e,o=k(null),s=k(null),{center:a,zoom:n,bounds:u,mapStyle:p}=ce(t),v={streets:"mapbox://styles/mapbox/streets-v11",outdoors:"mapbox://styles/mapbox/outdoors-v11",light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/mapbox/dark-v10",satellite:"mapbox://styles/mapbox/satellite-streets-v11","navigation-day":"mapbox://styles/mapbox/navigation-day-v1","navigation-night":"mapbox://styles/mapbox/navigation-night-v1"},_=x=>x==="satellite"?18:22;function d(){s.value=new O.exports.Map({container:o.value,style:v[t.mapStyle],center:[a.value.lng,a.value.lat],zoom:n.value,accessToken:t.accessToken,maxZoom:_(t.mapStyle)}),s.value.addControl(new O.exports.FullscreenControl).addControl(new O.exports.GeolocateControl).addControl(new O.exports.ScaleControl({unit:"imperial"})),t.bounds&&s.value.fitBounds(u.value,{padding:64})}return N(p,()=>{const x=p.value;s.value.setStyle(v[x]),s.value.setMaxZoom(_(x))}),N(u,()=>{s.value.fitBounds(u.value,{padding:64})}),le(()=>{d()}),He(()=>{}),be("map",s),(x,pe)=>(r(),c("div",{ref_key:"mapContainerRef",ref:o,class:"map-container"},[P(x.$slots,"default",{},void 0,!0)],512))}};var Wt=g(Kt,[["__scopeId","data-v-5a110396"]]);const Zt=({lng:e,lat:t})=>[e,t],Xt=e=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.map(Zt)}}),Yt={props:{positions:ee(F({lng:L().isRequired,lat:L().isRequired})),id:S().isRequired,color:S()},setup(e){const t=e,o=ue("map",null),{color:s}=ce(t);function a({id:n,positions:u,color:p}){const v=o.value;if(!!v){if(!n)throw Error(`addDataLayer is missing id '${n}'`);if(!Array.isArray(u))throw Error(`addDataLayer is missing positions '${u}'`);v.getLayer(n)&&v.removeLayer(n),v.getSource(n)&&v.removeSource(n),o.value.addSource(n,{type:"geojson",data:Xt(u)}).addLayer({id:n,source:n,type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":p||"#0472f8","line-width":6}})}}return N(o,()=>{!o.value||(o.value.on("load",()=>a(t)),o.value.on("style.load",()=>a(t)))}),N(s,()=>{const n=()=>o.value.setPaintProperty(t.id,"line-color",s.value);if(o.value.isStyleLoaded())return n();o.value.on("style.load",n)}),(n,u)=>P(n.$slots,"default")}};var Qt=(e,t)=>{const o=k(null);return N([e,t],()=>{const s=l(e);if(!s)return;const a=l(o);a&&a.remove(),o.value=new O.exports.Marker({color:t.color}).setLngLat([t.lng,t.lat]).addTo(s)}),{marker:o}};const eo={props:{lng:L().isRequired,lat:L().isRequired,color:S()},setup(e){const t=e,o=ue("map"),{marker:s}=Qt(o,t);return be("marker",s),(a,n)=>P(a.$slots,"default")}};const to={setup(e){const t=ue("marker"),o=k(null);return N([t,o],()=>{if(!t.value||!o.value)return;const s=new O.exports.Popup().setDOMContent(o.value);t.value.setPopup(s)}),(s,a)=>(r(),c("div",{ref_key:"popupRef",ref:o,class:"map-popup"},[P(s.$slots,"default")],512))}};const oo={key:0,class:"material-icons"},so=R("Button Text"),ao={props:{icon:{type:String,default:null},variant:{type:String,validator(e){return["primary","secondary","inverse"].includes(e)},default:"secondary"},iconPosition:{type:String,default:"before"}},setup(e){const t=e,o=m(()=>({"button--primary":t.variant==="primary","button--icon-position-end":t.iconPosition==="end","button--inverse":t.variant==="inverse"}));return(s,a)=>(r(),c("button",{class:C(["button",l(o)])},[e.icon?(r(),c("span",oo,f(e.icon),1)):b("",!0),P(s.$slots,"default",{},()=>[so],!0)],2))}};var V=g(ao,[["__scopeId","data-v-2df047d2"]]);function ye(e=0,t,o){const s=e>0?t[e-1]:null,a=o[e],n=t[e];return[s,...a,n].filter(Boolean)}function Se(e){const[[t,o],[s,a]]=e;return{lng:(t+s)/2,lat:(o+a)/2}}const Ie=e=>(E("data-v-50097fb4"),e=e(),q(),e),no={key:0,class:"button-bar"},ro={class:"map-popup__stop-number-container"},lo={class:"map-popup__stop-number"},co={class:"map-popup__stop-title"},uo={class:"map-popup__link-container"},io=Ie(()=>i("span",{class:"material-icons"},"arrow_forward",-1)),_o=Ie(()=>i("span",{class:"sr-only"},"Go to Stop",-1)),po={props:{type:Fe(),stopIndex:L().isRequired,initialMapStyle:S().def("light"),showMapStyleControl:te().def(!0)},setup(e){const t=e;function o({tour:T,locale:K}){return T.stops.map((W,I)=>({title:W.stop_content.title[K],href:`/tours/${W.tour_id}/stops/${I}`,number:I+1}))}function s(T){return T<u.value?"#7EEAFC":T===u.value?"#0A84FF":"#999"}function a(T){oe.value=T}const{tour:n}=D(),{stopIndex:u}=ce(t),{locale:p}=G(),{accessToken:v}=kt(),_=k(null),d=k(null),x=k(10),pe=["dark","satellite","streets","light"].sort(),oe=k(t.initialMapStyle),Ae=m(()=>xt(n.value)),se=m(()=>St(n.value)),ae=m(()=>$t(n.value)),Ce=m(()=>n.value.start_location),ne=m(()=>o({tour:n.value,locale:p.value}));if(t.type==="tour"&&(_.value=re(Ae.value),d.value=Ce.value),t.type==="stop"){const T=ye(u.value,ae.value,se.value);_.value=re(T),d.value=Se(_.value),x.value=16}return N(u,()=>{if(t.type!=="stop")return;const T=ye(u.value,ae.value,se.value);_.value=re(T),d.value=Se(_.value)}),(T,K)=>{const W=z("router-link");return r(),c("div",{class:C(["tour-map",`tour-map--${e.initialMapStyle}`]),onPointerdown:K[0]||(K[0]=I=>I.stopPropagation())},[e.showMapStyleControl?(r(),c("div",no,[(r(!0),c(w,null,M(l(pe),I=>(r(),$(V,{key:I,class:C(["button-bar__button",{"button-bar__button--is-active":I===oe.value}]),onClick:A=>a(I)},{default:y(()=>[R(f(l(gt)(I)),1)]),_:2},1032,["class","onClick"]))),128))])):b("",!0),d.value?(r(),$(Wt,{key:1,class:"map-sheet__map-container",center:d.value,zoom:x.value,bounds:_.value,mapStyle:oe.value,accessToken:l(v)},{default:y(()=>[(r(!0),c(w,null,M(l(se),(I,A)=>(r(),$(Yt,{id:`route-${A}`,key:A,positions:I,color:s(A)},null,8,["id","positions","color"]))),128)),(r(!0),c(w,null,M(l(ae),(I,A)=>(r(),$(eo,{key:A,lng:I.lng,lat:I.lat,color:s(A)},{default:y(()=>[h(to,null,{default:y(()=>[i("p",ro,[i("span",lo,f(l(ne)[A].number),1)]),i("h2",co,f(l(ne)[A].title),1),i("p",uo,[h(W,{to:l(ne)[A].href,class:"map-popup__link"},{default:y(()=>[io,_o]),_:2},1032,["to"])])]),_:2},1024)]),_:2},1032,["lng","lat","color"]))),128))]),_:1},8,["center","zoom","bounds","mapStyle","accessToken"])):b("",!0)],34)}}};var Le=g(po,[["__scopeId","data-v-50097fb4"]]);const vo={props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e){const{stopIndex:t}=j();return(o,s)=>(r(),$(_e,{class:"map-sheet",title:"Map","is-open":e.isOpen,onClose:s[0]||(s[0]=a=>o.$emit("close"))},{default:y(()=>[h(Le,{initialMapStyle:"streets",type:"tour",stopIndex:l(t)},null,8,["stopIndex"])]),_:1},8,["is-open"]))}};const mo={class:"menu-sheet__list"},go={class:"menu-sheet__list-item"},ho={key:0,class:"material-icons"},fo={props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=[{icon:"home",text:"Home",href:"/"},{icon:"settings",text:"Settings",href:"/settings"},{icon:"help_outline",text:"Help",href:"/help"}];return(o,s)=>{const a=z("router-link");return r(),$(_e,{class:"menu-sheet",title:"Menu","is-open":e.isOpen,onClose:s[0]||(s[0]=n=>o.$emit("close"))},{default:y(()=>[i("ol",mo,[(r(),c(w,null,M(t,(n,u)=>h(a,{key:u,to:n.href},{default:y(()=>[i("li",go,[n.icon?(r(),c("span",ho,f(n.icon),1)):b("",!0),i("span",null,f(n.text),1)])]),_:2},1032,["to"])),64))])]),_:1},8,["is-open"])}}};var yo=g(fo,[["__scopeId","data-v-4f35d8b7"]]);const So={class:"stoplist"},$o={class:"stoplist__number"},bo={emits:["close"],setup(e){const t=H(),{stopIndex:o}=j(),{locale:s}=G(),a=m(()=>t.getters.allStops),n=u=>u.stop_content.title[s.value];return(u,p)=>{const v=z("router-link");return r(),$(_e,{class:"stoplist-sheet",title:"Tour Stops",onClose:p[1]||(p[1]=_=>u.$emit("close"))},{default:y(()=>[i("ol",So,[(r(!0),c(w,null,M(l(a),(_,d)=>(r(),$(v,{key:_.id,to:`/tours/${_.tour_id}/stops/${d}`,onClick:p[0]||(p[0]=x=>u.$emit("close"))},{default:y(()=>[i("li",{class:C(["stoplist__item",{"stoplist__item--is-active":d===l(o)}])},[i("div",$o,f(d+1),1),R(" "+f(n(_)),1)],2)]),_:2},1032,["to"]))),128))])]),_:1})}}};var xo=g(bo,[["__scopeId","data-v-d9903b78"]]);const J=e=>(E("data-v-bc23e1e4"),e=e(),q(),e),ko={class:"bottom-nav"},Io={class:"bottom-nav__navbar"},Lo=J(()=>i("span",{class:"material-icons"},"menu",-1)),To=J(()=>i("span",{class:"sr-only"},"Menu",-1)),wo=[Lo,To],Mo=J(()=>i("span",{class:"sr-only"},"Open Tour Stops",-1)),Ro=J(()=>i("span",{class:"material-icons"},"map",-1)),Ao=J(()=>i("span",{class:"sr-only"},"Map",-1)),Co=[Ro,Ao],Po={setup(e){const t={MENU:"MENU",STOPLIST:"STOPLIST",MAP:"MAP"},o=k(null),s=H(),a=m(()=>s.getters.stopIndex),n=m(()=>s.getters.totalStops),u=_=>{o.value=t[_]},p=()=>o.value=null,v=_=>o.value===_;return(_,d)=>(r(),c("div",ko,[i("nav",Io,[i("button",{class:"bottom-nav__button",onClick:d[0]||(d[0]=x=>u(t.MENU))},wo),i("button",{class:"bottom-nav__progress-button",onClick:d[1]||(d[1]=x=>u(t.STOPLIST))},[h(Ot,{total:l(n),active:l(a)},null,8,["total","active"]),Mo]),i("button",{class:"bottom-nav__button",onClick:d[2]||(d[2]=x=>u(t.MAP))},Co)]),i("div",null,[h(yo,{"is-open":v(t.MENU),onClose:d[3]||(d[3]=x=>p())},null,8,["is-open"]),h(xo,{"is-open":v(t.STOPLIST),onClose:d[4]||(d[4]=x=>p())},null,8,["is-open"]),h(vo,{"is-open":v(t.MAP),onClose:d[5]||(d[5]=x=>p())},null,8,["is-open"])])]))}};var No=g(Po,[["__scopeId","data-v-bc23e1e4"]]);const Bo={class:"stop-header__content"},Eo={class:"stop-header__number"},qo={class:"stop-header__title h2"},Oo={key:0,class:"stop-header__subtitle"},Ho={class:"stop-header__img-container"},Fo=["src","alt"],zo={props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},stopNumber:L().isRequired,imageSrc:S(),imageAlt:S()},setup(e){return ze(t=>({"22d1dc81":e.stopNumber})),(t,o)=>(r(),c("header",{class:C(["stop-header",{"stop-header--no-img":!e.imageSrc}])},[i("div",Bo,[i("p",Eo,f(e.stopNumber===1?"Start":e.stopNumber),1),i("h2",qo,f(e.title),1),e.subtitle?(r(),c("p",Oo,f(e.subtitle),1)):b("",!0),P(t.$slots,"default",{},void 0,!0)]),i("div",Ho,[e.imageSrc?(r(),c("img",{key:0,class:"stop-header__img",src:e.imageSrc,alt:e.imageAlt},null,8,Fo)):b("",!0)])],2))}};var Te=g(zo,[["__scopeId","data-v-3128c2f3"]]);const Uo=e=>(E("data-v-8ab40eb4"),e=e(),q(),e),Do={class:"tour-stop"},jo=Uo(()=>i("div",{class:"tour-stop__stages container"},[i("div",{class:"skeleton-block skeleton--small"}),i("div",{class:"skeleton-block skeleton-block--medium"}),i("div",{class:"skeleton-block skeleton-block--large"})],-1)),Go={props:{tour:U().isRequired,locale:S().isRequired,stopIndex:L().def(0)},setup(e){const t=e,o=m(()=>t.tour.stops[t.stopIndex]),s=m(()=>{var u,p;const n=(p=(u=o.value)==null?void 0:u.stop_content)==null?void 0:p.header_image;return n?`${B.apiBaseUrl}${n.src}`:null}),a=m(()=>{var u,p;const n=(p=(u=o.value)==null?void 0:u.stop_content)==null?void 0:p.header_image;return n?n.alt:null});return(n,u)=>(r(),c("div",Do,[h(Te,{title:e.stopIndex===0?e.tour.title:l(o).stop_content.title[e.locale],subtitle:`${e.tour.geocoded.city}, ${e.tour.geocoded.state}`,stopNumber:e.stopIndex+1,imageSrc:l(s),imageAlt:l(a)},null,8,["title","subtitle","stopNumber","imageSrc","imageAlt"]),jo]))}};var Vo=g(Go,[["__scopeId","data-v-8ab40eb4"]]);const Jo=["src","alt"],Ko={props:{email:{type:String,default:null},name:{type:String,required:!0},size:{type:Number,default:200},variant:{type:String,default:"medium"}},setup(e){const t=e,o=a=>Ue(a.trim().toLowerCase()),s=m(()=>o(t.email));return(a,n)=>(r(),c("div",{class:C(["gravatar",{"gravatar--small":e.variant==="small","gravatar--large":e.variant==="large"}])},[R(f(e.name.charAt(0))+" ",1),e.email?(r(),c("img",{key:0,src:`https://www.gravatar.com/avatar/${l(s)}?s=${e.size}`,alt:e.name},null,8,Jo)):b("",!0)],2))}};var Wo=g(Ko,[["__scopeId","data-v-34c63ab6"]]);const Zo={class:"tour-author"},Xo={class:"tour-author__body"},Yo={class:"tour-author__name"},Qo={class:"tour-author__title"},es={props:{author:F({name:S().isRequired,email:S().isRequired,title:S().def("Tour Guide"),institution:S()})},setup(e){return(t,o)=>(r(),c("div",Zo,[h(Wo,{class:"tour-author__img",email:e.author.email,name:e.author.name},null,8,["email","name"]),i("div",Xo,[i("p",Yo,f(e.author.name),1),i("p",Qo,f(e.author.title),1)])]))}};var ts=g(es,[["__scopeId","data-v-486aa66a"]]);const os=e=>(E("data-v-1a603bbc"),e=e(),q(),e),ss={class:"language-stage"},as=os(()=>i("h3",null,"Language",-1)),ns=["value","checked","onChange"],rs=R("Save"),ls={props:{locale:{type:String,required:!0},locales:ee(S())},emits:["setLocale"],setup(e,{emit:t}){const s=k(e.locale),a=u=>{s.value=u},n=u=>t("setLocale",u);return(u,p)=>(r(),c("div",ss,[e.locales.length>1?(r(),c("form",{key:0,class:"lanugage-stage__form",onSubmit:p[0]||(p[0]=De(v=>n(s.value),["prevent"]))},[as,(r(!0),c(w,null,M(e.locales,(v,_)=>(r(),c("label",{key:_,class:"input-group"},[i("input",{name:"locale",type:"radio",value:v,checked:s.value===v,onChange:d=>a(v)},null,40,ns),R(" "+f(e.locale),1)]))),128)),h(V,{class:"save-button",type:"submit",variant:"primary"},{default:y(()=>[rs]),_:1})],32)):b("",!0)]))}};var cs=g(ls,[["__scopeId","data-v-1a603bbc"]]);const us={setup(e){const{locale:t,setLocale:o}=G(),{tourLocales:s}=It();return(a,n)=>(r(),$(cs,{locale:l(t),locales:l(s),onSetLocale:l(o)},null,8,["locale","locales","onSetLocale"]))}};var is=g(us,[["__scopeId","data-v-2fbf05b7"]]);const _s=["innerHTML"],we={props:{content:S().def("")},setup(e){const t=e,o=Q(Ge.parse,je.sanitize),s=m(()=>o(t.content));return(a,n)=>(r(),c("div",{class:"markdown",innerHTML:l(s)},null,8,_s))}};const ps={class:"guide-stage"},ds={props:{stage:F().loose,locale:{type:String,default:"en"}},setup(e){const t=e,o=m(()=>t.stage.text[t.locale]);return(s,a)=>(r(),c("div",ps,[h(we,{content:l(o)},null,8,["content"])]))}};var vs=g(ds,[["__scopeId","data-v-4a6966e8"]]);const ms={class:"separator-stage"},gs={props:{stage:F({text:U().def({en:""})}).loose,locale:S().isRequired},setup(e){const t=e,o=m(()=>t.stage.text[t.locale]);return(s,a)=>(r(),c("h3",ms,f(l(o)),1))}};var hs=g(gs,[["__scopeId","data-v-10a6ebf9"]]);const fs={class:"navigation-stage"},ys=R(" Show Map "),Ss={key:1,class:"navigation-stage__tour-map-wrapper"},$s={props:{stage:F().loose,locale:S().isRequired,hasShowMapToggle:te().def(!0)},setup(e){const t=e,o=m(()=>t.stage.text[t.locale]),{stopIndex:s}=j(),a=k(!t.hasShowMapToggle),n=()=>a.value=!a.value;return(u,p)=>(r(),c("div",fs,[h(we,{content:l(o)},null,8,["content"]),e.hasShowMapToggle?(r(),$(V,{key:0,icon:"map",onClick:n},{default:y(()=>[ys]),_:1})):b("",!0),a.value?(r(),c("div",Ss,[h(Le,{initialMapStyle:"satellite",type:"stop",stopIndex:l(s)},null,8,["stopIndex"])])):b("",!0)]))}};const bs={class:"gallery-stage"},xs={class:"gallery-stage__thumbnails"},ks=["onClick"],Is={class:"gallery-stage__figure-image-wrap"},Ls=["src","alt"],Ts={key:0,class:"gallery-stage__figure-figcaption"},ws={props:{stage:{type:Object,required:!0},locale:{type:String,default:"en"}},setup(e){const t=e,o=k(0),s=m(()=>t.stage.images.map(p=>({src:`${B.imageStorageBase}/${p.src}`,alt:p.text[t.locale],title:p.text[t.locale]}))),a=k(!1),n=p=>{o.value=p,a.value=!0},u=()=>{a.value=!1};return(p,v)=>(r(),c("div",bs,[i("div",xs,[(r(!0),c(w,null,M(l(s),(_,d)=>(r(),c("figure",{key:d,class:"gallery__figure",onClick:x=>n(d)},[i("div",Is,[i("img",{src:_.src,alt:_.alt,loading:"lazy"},null,8,Ls)]),_.title?(r(),c("figcaption",Ts,f(_.title),1)):b("",!0)],8,ks))),128)),h(l(Ve),{scrollDisabled:"",escDisabled:"",moveDisabled:"",loop:"",visible:a.value,imgs:l(s),index:o.value,teleport:"body",onHide:u},null,8,["visible","imgs","index"])])]))}};var Ms=g(ws,[["__scopeId","data-v-6dc438c4"]]);const Rs={class:"ar-stage"},As=R("Look Around"),Cs=["src"],Ps={props:{stage:U().isRequired,simulateLocation:te().def(!1),locale:S().def("en")},setup(e){const t=e,{tour:o}=D(),{stopIndex:s}=j(),a=k(!1);function n(){console.log("toggleShowAr"),a.value=!a.value}const u=m(()=>`${B.apiBaseUrl}/ar/${o.value.id}/${s.value}/English/${t.simulateLocation}`);return(p,v)=>(r(),c("div",Rs,[h(V,{icon:"travel_explore",onClick:n},{default:y(()=>[As]),_:1}),a.value?(r(),c("iframe",{key:0,class:"ar-iframe",src:l(u),frameborder:"0",width:"100%",height:"100%"},`
      Loading AR...
    `,8,Cs)):b("",!0)]))}};const Ns={key:1,class:"stage-unknown"},Bs={props:{stage:{type:Object,required:!0}},setup(e){const t=e,o={language:is,guide:vs,separator:hs,navigation:$s,gallery:Ms,ar:Ps},s=m(()=>o[t.stage.type]);return(a,n)=>l(s)?(r(),$(Je(l(s)),{key:0,stage:e.stage},null,8,["stage"])):(r(),c("div",Ns,[i("h3",null,f(e.stage.type),1),i("pre",null,f(e.stage),1)]))}};var Es=g(Bs,[["__scopeId","data-v-97a59022"]]);const qs={class:"tour-stop"},Os={class:"tour-stop__stages container"},Hs={key:0},Fs=R(" Continue "),zs={props:{stopIndex:L().def(0),stop:U().isRequired,isLastStop:te().def(!1)},setup(e){const t=e,{tour:o}=D(),{locale:s}=G(),a=m(()=>t.stopIndex===0),n=m(()=>{var v,_;return(_=(v=t.stop)==null?void 0:v.stop_content)==null?void 0:_.stages})||[],u=m(()=>{var _,d;const v=(d=(_=t.stop)==null?void 0:_.stop_content)==null?void 0:d.header_image;return v?`${B.apiBaseUrl}${v.src}`:null}),p=m(()=>{var _,d;const v=(d=(_=t.stop)==null?void 0:_.stop_content)==null?void 0:d.header_image;return v?v.alt:null});return(v,_)=>(r(),c("div",qs,[h(Te,{title:l(a)?l(o).title:e.stop.stop_content.title[l(s)],subtitle:`${l(o).geocoded.city}, ${l(o).geocoded.state}`,stopNumber:e.stopIndex+1,imageSrc:l(u),imageAlt:l(p)},{default:y(()=>[l(a)&&l(o).author?(r(),$(ts,{key:0,author:l(o).author},null,8,["author"])):b("",!0)]),_:1},8,["title","subtitle","stopNumber","imageSrc","imageAlt"]),i("div",Os,[l(a)?(r(),c("h2",Hs,"Start")):b("",!0),(r(!0),c(w,null,M(l(n),d=>(r(),c("section",{key:`${e.stop.id}-${d.id}`},[h(Es,{stage:d,locale:l(s)},null,8,["stage","locale"])]))),128)),e.isLastStop?b("",!0):(r(),$(V,{key:1,icon:"arrow_forward",iconPosition:"end",variant:"primary",onClick:_[0]||(_[0]=d=>v.$router.push(`/tours/${l(o).id}/stops/${e.stopIndex+1}`))},{default:y(()=>[Fs]),_:1}))])]))}};var Us=g(zs,[["__scopeId","data-v-5683acb7"]]);const Ds={props:{tour:U().isRequired,stopIndex:L().def(0),locale:S().isRequired},setup(e){const t=e,o=k(null),s=Ke();function a(u){o.value=u}function n(u){Ze(()=>{s.push(`/tours/${t.tour.id}/stops/${u.activeIndex}`)})}return N(()=>t.stopIndex,()=>{!o.value||o.value.slideTo(t.stopIndex,0)}),(u,p)=>(r(),$(l(We),{"slides-per-view":1,"space-between":16,initialSlide:e.stopIndex,onSwiper:a,onSlideChangeTransitionEnd:n},{default:y(()=>[(r(!0),c(w,null,M(e.tour.stops,(v,_)=>(r(),$(l(Xe),{key:_,autoHeight:!0},{default:y(()=>[e.stopIndex===_?(r(),$(Us,{key:0,stop:v,stopIndex:_},null,8,["stop","stopIndex"])):(r(),$(Vo,{key:1,tour:e.tour,stopIndex:_,locale:e.locale},null,8,["tour","stopIndex","locale"]))]),_:2},1024))),128))]),_:1},8,["initialSlide"]))}};const js={setup(e){const{directions:t}=Ye(window,{onScroll:s,throttle:300}),o=k(!1);function s(){t.bottom&&(o.value=!0),t.top&&(o.value=!1)}return(a,n)=>(r(),c("div",{class:C(["tuck-on-scroll",{"tuck-on-scroll--is-tucked":o.value}])},[P(a.$slots,"default",{},void 0,!0)],2))}};var Gs=g(js,[["__scopeId","data-v-dc8fad7a"]]);const Vs={class:"tour-page"},Js={key:0,class:"loading"},Ks={key:1},Ws={setup(e){const t=H(),{stopIndex:o}=j(),{tour:s}=D(),{locale:a}=G(),n=m(()=>t.state.isLoading);return le(()=>{t.dispatch("fetchTour",t.state.route.params.tourId)}),(u,p)=>(r(),c("div",Vs,[h(Gs,null,{default:y(()=>[h(Ct,{class:"tour-page__app-header"})]),_:1}),l(n)?(r(),c("div",Js,"Loading...")):b("",!0),l(n)?b("",!0):(r(),c("div",Ks,[h(Ds,{tour:l(s),stopIndex:l(o),locale:l(a)},null,8,["tour","stopIndex","locale"]),h(No)]))]))}};var Zs=g(Ws,[["__scopeId","data-v-83e80184"]]);const Xs={};function Ys(e,t){return r(),c("h1",null,"Settings Page")}var Qs=g(Xs,[["render",Ys]]);const ea={};function ta(e,t){return r(),c("h1",null,"Help Page")}var oa=g(ea,[["render",ta]]);const sa=[{path:"/",component:mt},{path:"/tours/:tourId/stops/:stopIndex",component:Zs},{path:"/settings",component:Qs},{path:"/help",component:oa}],Me=Qe({history:et(),routes:sa,scrollBehavior(e,t,o){return o||{top:0}}}),$e=e=>Number.parseInt(e,10),aa={tour:null,isLoading:!0,locale:"en",errors:[]},na={allStops(e){const{tour:t}=e;return t?t.stops:[]},totalStops(e){return e.tour?e.tour.stops.length:0},stopIndex(e){return $e(e.route.params.stopIndex||0)},tourId(e){return $e(e.route.params.tourId)},isFirstStop(e,t){return t.stopIndex===0},isLastStop(e,t){return t.stopIndex===t.totalStops-1},currentStop(e,t){var o;return((o=t.allStops)==null?void 0:o[t.stopIndex])||null},nextStop(e,t){return t.isLastStop?null:e.getters.allStops[t.stopIndex+1]},previousStop(e,t){return t.isFirstStop?null:e.getters.allStops[t.stopIndex-1]}},ra={fetchTourStarted(e){e.isLoading=!0},fetchTourSucceeded(e,t){e.isLoading=!1,e.tour=t},fetchTourFailed(e,t){e.isLoading=!1,e.errors.push(t)},setLocale(e,t){e.locale=t}},la={fetchTour({commit:e},t){e("fetchTourStarted"),ie.get(t).then(o=>{e("fetchTourSucceeded",o)}).catch(o=>{console.error(o),e("fetchTourFailed",o)})},setLocale({commit:e},t){e("setLocale",t)}},ca={state:()=>aa,getters:na,mutations:ra,actions:la,plugins:[tt()]},Re=ot(ca);st(Re,Me);const ua=at(ct);ua.use(Me).use(Re).mount("#app");
//# sourceMappingURL=index.6bb99699.js.map
