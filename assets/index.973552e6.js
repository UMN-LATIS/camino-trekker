var Be=Object.defineProperty,Ee=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var Oe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var me=(e,t,s)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ge=(e,t)=>{for(var s in t||(t={}))Oe.call(t,s)&&me(e,s,t[s]);if(ve)for(var s of ve(t))qe.call(t,s)&&me(e,s,t[s]);return e},he=(e,t)=>Ee(e,Ne(t));import{r as H,o as r,c as S,a as fe,b as l,d as u,e as C,f as h,w as f,u as c,p as N,g as O,h as He,i as k,n as P,j as ce,F as L,k as M,l as R,t as y,m as $,q as m,s as F,v as Fe,x as z,y as T,z as te,A as b,B as ue,C as B,D as ze,E as be,G as q,H as ie,I as De,J as se,T as Ue,K as Ve,L as D,M as je,N as Ge,O as Je,P as Ke,R as We,Q as Ze,S as Xe,U as Ye,V as Qe,W as et,X as tt,Y as st,Z as ot,_ as at,$ as nt,a0 as rt}from"./vendor.b371be99.js";const lt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}};lt();var g=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s};const ct={};function ut(e,t){const s=H("router-view");return r(),S(s)}var it=g(ct,[["render",ut]]),ee=(...e)=>t=>e.reduce((s,o)=>o(s),t);const Z={VITE_MAPBOX_ACCESS_TOKEN:"pk.eyJ1Ijoiam9obnNvanIiLCJhIjoiY2t5MzdwMmFmMHNiNDJvbzBrZTlpaWRndiJ9.QL88g10hiKLOLz6ohLcuow",VITE_BASE_DIR:"/camino-trekker/",VITE_API_HOST:"https://cla-camino-dev.oit.umn.edu",BASE_URL:"/camino-trekker/",MODE:"production",DEV:!1,PROD:!0};var E={apiBaseUrl:Z.VITE_API_HOST,imageStorageBase:`${Z.VITE_API_HOST}/storage`,baseDir:Z.VITE_BASE_DIR,mapBox:{accessToken:Z.VITE_MAPBOX_ACCESS_TOKEN}};const X=[],_e={get(e){return fe(`${E.apiBaseUrl}/api/tour/${e}`).then(ee(...X)).then(t=>t.data).catch(console.error)},applyMiddlewares(e){return ee(...X)(e)},list(){return fe(`${E.apiBaseUrl}/api/tours`).then(ee(...X)).then(e=>e.data).catch(console.error)},use(e){X.push(e)}};function _t([e,t],s){const a=JSON.stringify(s).replace(new RegExp(`"${e}":`,"g"),`"${t}":`);return JSON.parse(a)}function pt(e){const t=_t(["English","en"],e.data);return he(ge({},e),{data:t})}_e.use(pt);var dt="/camino-trekker/assets/umn-logo.b8420373.svg";const vt=e=>(N("data-v-c17ccc64"),e=e(),O(),e),mt={class:"app-header container"},gt={class:"app-header__contents"},ht=["src"],ft=vt(()=>u("h1",null,"Camino",-1)),yt={setup(e){return(t,s)=>{const o=H("router-link");return r(),l("header",mt,[u("div",gt,[C(t.$slots,"default",{},()=>[h(o,{to:"/"},{default:f(()=>[u("img",{src:c(dt),alt:"University of Minnesota"},null,8,ht),ft]),_:1})],!0)])])}}};var St=g(yt,[["__scopeId","data-v-c17ccc64"]]);const $t={setup(e){const{directions:t}=He(window,{onScroll:o,throttle:300}),s=k(!1);function o(){t.bottom&&(s.value=!0),t.top&&(s.value=!1)}return(a,n)=>(r(),l("div",{class:P(["tuck-on-scroll",{"tuck-on-scroll--is-tucked":s.value}])},[C(a.$slots,"default",{},void 0,!0)],2))}};var bt=g($t,[["__scopeId","data-v-dc8fad7a"]]);const xt={id:"page-wrap"},xe={setup(e){return(t,s)=>(r(),l("div",xt,[h(bt,null,{default:f(()=>[h(St,{class:"tour-page__app-header"})]),_:1}),C(t.$slots,"default")]))}},kt={class:"home-page container"},It=u("h1",null,"Camino",-1),Tt={key:0},wt={setup(e){const t=k([]);return ce(async()=>{t.value=await _e.list()}),(s,o)=>{const a=H("router-link");return r(),S(xe,null,{default:f(()=>[u("div",kt,[It,t.value.length?(r(),l("ul",Tt,[(r(!0),l(L,null,M(t.value,n=>(r(),l("li",{key:n.id},[h(a,{to:`/tours/${n.id}/stops/0`},{default:f(()=>[R(y(n.title),1)]),_:2},1032,["to"])]))),128))])):$("",!0)])]),_:1})}}};var Lt=e=>e.charAt(0).toUpperCase()+e.slice(1);const Mt=e=>e.type==="navigation",Rt=e=>e.stop_content.stages.filter(Mt),At=e=>e.flatMap(t=>t.route);var Ct=e=>e.stops.map(s=>{const o=Rt(s);return At(o)}),Pt=e=>{const t=e.start_location,s=ke("type","navigation",e).map(o=>o.targetPoint);return[t,...s]};const Y=e=>(t,s)=>e(t,s),Q=e=>t=>t[e];var le=e=>{if(!Array.isArray(e))throw Error(`listOfLngLats is not an array ${JSON.stringify(e)}`);const t=e.map(Q("lng")).reduce(Y(Math.min),1/0),s=e.map(Q("lat")).reduce(Y(Math.min),1/0),o=e.map(Q("lng")).reduce(Y(Math.max),-1/0),a=e.map(Q("lat")).reduce(Y(Math.max),-1/0);return[[t,s],[o,a]]},Bt=(e,t,s)=>s.stop_content.stages.filter(o=>o[e]===t),ke=(e,t,s)=>s.stops.flatMap(o=>Bt(e,t,o)),Et=e=>{const s=ke("type","navigation",e).flatMap(o=>o.route);return[e.start_location,...s]};const U=()=>{const e=F();return{tour:m(()=>e.state.tour)}},V=()=>{const e=F();return{stopIndex:m(()=>e.getters.stopIndex)}},j=()=>{const e=F();return{locale:m(()=>e.state.locale),setLocale:t=>e.dispatch("setLocale",t)}},Nt=()=>({accessToken:m(()=>E.mapBox.accessToken)}),Ot=()=>{const{tour:e}=U();return{tourLocales:m(()=>e.value.tour_content.languages)}};const qt=e=>(N("data-v-2271b65e"),e=e(),O(),e),Ht={class:"progress-indicator"},Ft=qt(()=>u("span",{class:"item__dot material-icons"},"circle",-1)),zt={class:"item__index"},Dt={props:{total:{type:Number,required:!0},active:{type:Number,required:!0}},setup(e){const t=e,s=m(()=>Fe(t.total)),o=a=>a===t.active;return(a,n)=>(r(),l("ol",Ht,[(r(!0),l(L,null,M(c(s),(i,p)=>(r(),l("li",{key:p,class:P(["item",{"item--is-active":o(p)}])},[Ft,u("span",zt,y(p===0?"Start":p+1),1)],2))),128))]))}};var Ut=g(Dt,[["__scopeId","data-v-2271b65e"]]);const Ie=e=>(N("data-v-ca0e39e2"),e=e(),O(),e),Vt={class:"sheet__inner"},jt={class:"sheet__header"},Gt={class:"sheet__title"},Jt=Ie(()=>u("span",{class:"material-icons"},"close",-1)),Kt=Ie(()=>u("span",{class:"sr-only"},"Close",-1)),Wt=[Jt,Kt],Zt={class:"sheet__body"},Xt=R("Sheet Contents"),Yt={props:{title:{type:String,default:""},isOpen:{type:Boolean,default:!0}},emits:["close"],setup(e){return(t,s)=>(r(),l("aside",{class:P(["sheet",{"sheet--is-open":e.isOpen}])},[u("div",Vt,[u("header",jt,[u("h2",Gt,y(e.title),1),u("button",{class:"sheet__close-button",onClick:s[0]||(s[0]=o=>t.$emit("close"))},Wt)]),u("div",Zt,[C(t.$slots,"default",{},()=>[Xt],!0)])])],2))}};var pe=g(Yt,[["__scopeId","data-v-ca0e39e2"]]);const Qt={props:{center:z({lng:T().isRequired,lat:T().isRequired}).isRequired,zoom:T().isRequired,bounds:te(te(T())),mapStyle:b().def("streets"),accessToken:b().isRequired},setup(e){const t=e,s=k(null),o=k(null),{center:a,zoom:n,bounds:i,mapStyle:p}=ue(t),v={streets:"mapbox://styles/mapbox/streets-v11",outdoors:"mapbox://styles/mapbox/outdoors-v11",light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/mapbox/dark-v10",satellite:"mapbox://styles/mapbox/satellite-streets-v11","navigation-day":"mapbox://styles/mapbox/navigation-day-v1","navigation-night":"mapbox://styles/mapbox/navigation-night-v1"},_=x=>x==="satellite"?18:22;function d(){o.value=new q.exports.Map({container:s.value,style:v[t.mapStyle],center:[a.value.lng,a.value.lat],zoom:n.value,accessToken:t.accessToken,maxZoom:_(t.mapStyle)}),o.value.addControl(new q.exports.FullscreenControl).addControl(new q.exports.GeolocateControl).addControl(new q.exports.ScaleControl({unit:"imperial"})),t.bounds&&o.value.fitBounds(i.value,{padding:64})}return B(p,()=>{const x=p.value;o.value.setStyle(v[x]),o.value.setMaxZoom(_(x))}),B(i,()=>{o.value.fitBounds(i.value,{padding:64})}),ce(()=>{d()}),ze(()=>{}),be("map",o),(x,de)=>(r(),l("div",{ref_key:"mapContainerRef",ref:s,class:"map-container"},[C(x.$slots,"default",{},void 0,!0)],512))}};var es=g(Qt,[["__scopeId","data-v-5a110396"]]);const ts=({lng:e,lat:t})=>[e,t],ss=e=>({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.map(ts)}}),os={props:{positions:te(z({lng:T().isRequired,lat:T().isRequired})),id:b().isRequired,color:b()},setup(e){const t=e,s=ie("map",null),{color:o}=ue(t);function a({id:n,positions:i,color:p}){const v=s.value;if(!!v){if(!n)throw Error(`addDataLayer is missing id '${n}'`);if(!Array.isArray(i))throw Error(`addDataLayer is missing positions '${i}'`);v.getLayer(n)&&v.removeLayer(n),v.getSource(n)&&v.removeSource(n),s.value.addSource(n,{type:"geojson",data:ss(i.filter(Boolean))}).addLayer({id:n,source:n,type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":p||"#0472f8","line-width":6}})}}return B(s,()=>{!s.value||(s.value.on("load",()=>a(t)),s.value.on("style.load",()=>a(t)))}),B(o,()=>{const n=()=>s.value.setPaintProperty(t.id,"line-color",o.value);if(s.value.isStyleLoaded())return n();s.value.on("style.load",n)}),(n,i)=>C(n.$slots,"default")}};var as=(e,t)=>{const s=k(null);return B([e,t],()=>{const o=c(e);if(!o)return;const a=c(s);a&&a.remove(),s.value=new q.exports.Marker({color:t.color}).setLngLat([t.lng,t.lat]).addTo(o)}),{marker:s}};const ns={props:{lng:T().isRequired,lat:T().isRequired,color:b()},setup(e){const t=e,s=ie("map"),{marker:o}=as(s,t);return be("marker",o),(a,n)=>C(a.$slots,"default")}};const rs={setup(e){const t=ie("marker"),s=k(null);return B([t,s],()=>{if(!t.value||!s.value)return;const o=new q.exports.Popup().setDOMContent(s.value);t.value.setPopup(o)}),(o,a)=>(r(),l("div",{ref_key:"popupRef",ref:s,class:"map-popup"},[C(o.$slots,"default")],512))}};const ls={key:0,class:"material-icons"},cs=R("Button Text"),us={props:{icon:{type:String,default:null},variant:{type:String,validator(e){return["primary","secondary","inverse"].includes(e)},default:"secondary"},iconPosition:{type:String,default:"before"}},setup(e){const t=e,s=m(()=>({"button--primary":t.variant==="primary","button--icon-position-end":t.iconPosition==="end","button--inverse":t.variant==="inverse"}));return(o,a)=>(r(),l("button",{class:P(["button",c(s)])},[e.icon?(r(),l("span",ls,y(e.icon),1)):$("",!0),C(o.$slots,"default",{},()=>[cs],!0)],2))}};var G=g(us,[["__scopeId","data-v-2df047d2"]]);function ye(e=0,t,s){const o=e>0?t[e-1]:null,a=s[e],n=t[e];return[o,...a,n].filter(Boolean)}function Se(e){const[[t,s],[o,a]]=e;return{lng:(t+o)/2,lat:(s+a)/2}}const Te=e=>(N("data-v-bb312e5a"),e=e(),O(),e),is={key:0,class:"button-bar"},_s={class:"map-popup__stop-number-container"},ps={class:"map-popup__stop-number"},ds={class:"map-popup__stop-title"},vs={class:"map-popup__link-container"},ms=Te(()=>u("span",{class:"material-icons"},"arrow_forward",-1)),gs=Te(()=>u("span",{class:"sr-only"},"Go to Stop",-1)),hs={props:{type:De(),stopIndex:T().isRequired,initialMapStyle:b().def("light"),showMapStyleControl:se().def(!0)},setup(e){const t=e;function s({tour:w,locale:K}){return w.stops.map((W,I)=>({title:W.stop_content.title[K],href:`/tours/${W.tour_id}/stops/${I}`,number:I+1}))}function o(w){return w<i.value?"#7EEAFC":w===i.value?"#0A84FF":"#999"}function a(w){oe.value=w}const{tour:n}=U(),{stopIndex:i}=ue(t),{locale:p}=j(),{accessToken:v}=Nt(),_=k(null),d=k(null),x=k(10),de=["dark","satellite","streets","light"].sort(),oe=k(t.initialMapStyle),Ce=m(()=>Et(n.value).filter(Boolean)),ae=m(()=>Ct(n.value)),ne=m(()=>Pt(n.value)),Pe=m(()=>n.value.start_location),re=m(()=>s({tour:n.value,locale:p.value}));if(t.type==="tour"&&(_.value=le(Ce.value),d.value=Pe.value),t.type==="stop"){const w=ye(i.value,ne.value,ae.value);_.value=le(w),d.value=Se(_.value),x.value=16}return B(i,()=>{if(t.type!=="stop")return;const w=ye(i.value,ne.value,ae.value);_.value=le(w),d.value=Se(_.value)}),(w,K)=>{const W=H("router-link");return r(),l("div",{class:P(["tour-map",`tour-map--${e.initialMapStyle}`]),onPointerdown:K[0]||(K[0]=I=>I.stopPropagation())},[e.showMapStyleControl?(r(),l("div",is,[(r(!0),l(L,null,M(c(de),I=>(r(),S(G,{key:I,class:P(["button-bar__button",{"button-bar__button--is-active":I===oe.value}]),onClick:A=>a(I)},{default:f(()=>[R(y(c(Lt)(I)),1)]),_:2},1032,["class","onClick"]))),128))])):$("",!0),d.value?(r(),S(es,{key:1,class:"map-sheet__map-container",center:d.value,zoom:x.value,bounds:_.value,mapStyle:oe.value,accessToken:c(v)},{default:f(()=>[(r(!0),l(L,null,M(c(ae),(I,A)=>(r(),S(os,{id:`route-${A}`,key:A,positions:I,color:o(A)},null,8,["id","positions","color"]))),128)),(r(!0),l(L,null,M(c(ne),(I,A)=>(r(),S(ns,{key:A,lng:I.lng,lat:I.lat,color:o(A)},{default:f(()=>[h(rs,null,{default:f(()=>[u("p",_s,[u("span",ps,y(c(re)[A].number),1)]),u("h2",ds,y(c(re)[A].title),1),u("p",vs,[h(W,{to:c(re)[A].href,class:"map-popup__link"},{default:f(()=>[ms,gs]),_:2},1032,["to"])])]),_:2},1024)]),_:2},1032,["lng","lat","color"]))),128))]),_:1},8,["center","zoom","bounds","mapStyle","accessToken"])):$("",!0)],34)}}};var we=g(hs,[["__scopeId","data-v-bb312e5a"]]);const fs={props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e){const{stopIndex:t}=V();return(s,o)=>(r(),S(pe,{class:"map-sheet",title:"Map","is-open":e.isOpen,onClose:o[0]||(o[0]=a=>s.$emit("close"))},{default:f(()=>[h(we,{initialMapStyle:"streets",type:"tour",stopIndex:c(t)},null,8,["stopIndex"])]),_:1},8,["is-open"]))}};const ys={class:"menu-sheet__list"},Ss={class:"menu-sheet__list-item"},$s={key:0,class:"material-icons"},bs={props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(e){const t=[{icon:"home",text:"Home",href:"/"},{icon:"settings",text:"Settings",href:"/settings"},{icon:"help_outline",text:"Help",href:"/help"}];return(s,o)=>{const a=H("router-link");return r(),S(pe,{class:"menu-sheet",title:"Menu","is-open":e.isOpen,onClose:o[0]||(o[0]=n=>s.$emit("close"))},{default:f(()=>[u("ol",ys,[(r(),l(L,null,M(t,(n,i)=>h(a,{key:i,to:n.href},{default:f(()=>[u("li",Ss,[n.icon?(r(),l("span",$s,y(n.icon),1)):$("",!0),u("span",null,y(n.text),1)])]),_:2},1032,["to"])),64))])]),_:1},8,["is-open"])}}};var xs=g(bs,[["__scopeId","data-v-2c14334c"]]);const ks={class:"stoplist"},Is={class:"stoplist__number"},Ts={emits:["close"],setup(e){const t=F(),{stopIndex:s}=V(),{locale:o}=j(),a=m(()=>t.getters.allStops),n=i=>i.stop_content.title[o.value];return(i,p)=>{const v=H("router-link");return r(),S(pe,{class:"stoplist-sheet",title:"Tour Stops",onClose:p[1]||(p[1]=_=>i.$emit("close"))},{default:f(()=>[u("ol",ks,[(r(!0),l(L,null,M(c(a),(_,d)=>(r(),S(v,{key:_.id,to:`/tours/${_.tour_id}/stops/${d}`,onClick:p[0]||(p[0]=x=>i.$emit("close"))},{default:f(()=>[u("li",{class:P(["stoplist__item",{"stoplist__item--is-active":d===c(s)}])},[u("div",Is,y(d+1),1),R(" "+y(n(_)),1)],2)]),_:2},1032,["to"]))),128))])]),_:1})}}};var ws=g(Ts,[["__scopeId","data-v-d9903b78"]]);const J=e=>(N("data-v-4a054852"),e=e(),O(),e),Ls={class:"bottom-nav"},Ms={class:"bottom-nav__navbar"},Rs=J(()=>u("span",{class:"material-icons"},"menu",-1)),As=J(()=>u("span",{class:"sr-only"},"Menu",-1)),Cs=[Rs,As],Ps=J(()=>u("span",{class:"sr-only"},"Open Tour Stops",-1)),Bs=J(()=>u("span",{class:"material-icons"},"map",-1)),Es=J(()=>u("span",{class:"sr-only"},"Map",-1)),Ns=[Bs,Es],Os={setup(e){const t={MENU:"MENU",STOPLIST:"STOPLIST",MAP:"MAP"},s=k(null),o=F(),a=m(()=>o.getters.stopIndex),n=m(()=>o.getters.totalStops),i=_=>{s.value=t[_]},p=()=>s.value=null,v=_=>s.value===_;return(_,d)=>(r(),l("div",Ls,[u("nav",Ms,[u("button",{class:"bottom-nav__button",onClick:d[0]||(d[0]=x=>i(t.MENU))},Cs),u("button",{class:"bottom-nav__progress-button",onClick:d[1]||(d[1]=x=>i(t.STOPLIST))},[h(Ut,{total:c(n),active:c(a)},null,8,["total","active"]),Ps]),u("button",{class:"bottom-nav__button",onClick:d[2]||(d[2]=x=>i(t.MAP))},Ns)]),u("div",null,[(r(),S(Ue,{to:"#modals"},[h(xs,{"is-open":v(t.MENU),onClose:d[3]||(d[3]=x=>p())},null,8,["is-open"]),h(ws,{"is-open":v(t.STOPLIST),onClose:d[4]||(d[4]=x=>p())},null,8,["is-open"]),h(fs,{"is-open":v(t.MAP),onClose:d[5]||(d[5]=x=>p())},null,8,["is-open"])]))])]))}};var qs=g(Os,[["__scopeId","data-v-4a054852"]]);const Hs={class:"stop-header__content"},Fs={class:"stop-header__number"},zs={class:"stop-header__title h2"},Ds={key:0,class:"stop-header__subtitle"},Us={class:"stop-header__img-container"},Vs=["src","alt"],js={props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},stopNumber:T().isRequired,imageSrc:b(),imageAlt:b()},setup(e){return Ve(t=>({"420e8c17":e.stopNumber})),(t,s)=>(r(),l("header",{class:P(["stop-header",{"stop-header--no-img":!e.imageSrc}])},[u("div",Hs,[u("p",Fs,y(e.stopNumber),1),u("h2",zs,y(e.title),1),e.subtitle?(r(),l("p",Ds,y(e.subtitle),1)):$("",!0),C(t.$slots,"default",{},void 0,!0)]),u("div",Us,[e.imageSrc?(r(),l("img",{key:0,class:"stop-header__img",src:e.imageSrc,alt:e.imageAlt},null,8,Vs)):$("",!0)])],2))}};var Le=g(js,[["__scopeId","data-v-2fa2001b"]]);const Gs=e=>(N("data-v-27aeabc6"),e=e(),O(),e),Js={class:"tour-stop"},Ks=Gs(()=>u("div",{class:"tour-stop__stages container"},[u("div",{class:"skeleton-block skeleton--small"}),u("div",{class:"skeleton-block skeleton-block--medium"}),u("div",{class:"skeleton-block skeleton-block--large"})],-1)),Ws={props:{tour:D().isRequired,locale:b().isRequired,stopIndex:T().def(0)},setup(e){const t=e,s=m(()=>t.tour.stops[t.stopIndex]),o=m(()=>{var i,p;const n=(p=(i=s.value)==null?void 0:i.stop_content)==null?void 0:p.header_image;return n?`${E.apiBaseUrl}${n.src}`:null}),a=m(()=>{var i,p;const n=(p=(i=s.value)==null?void 0:i.stop_content)==null?void 0:p.header_image;return n?n.alt:null});return(n,i)=>(r(),l("div",Js,[h(Le,{title:e.stopIndex===0?e.tour.title:c(s).stop_content.title[e.locale],subtitle:e.tour.subtitle||"",stopNumber:e.stopIndex+1,imageSrc:c(o),imageAlt:c(a)},null,8,["title","subtitle","stopNumber","imageSrc","imageAlt"]),Ks]))}};var Zs=g(Ws,[["__scopeId","data-v-27aeabc6"]]);const Xs=["src","alt"],Ys={props:{email:{type:String,default:null},name:{type:String,required:!0},size:{type:Number,default:200},variant:{type:String,default:"medium"}},setup(e){const t=e,s=a=>je(a.trim().toLowerCase()),o=m(()=>s(t.email));return(a,n)=>(r(),l("div",{class:P(["gravatar",{"gravatar--small":e.variant==="small","gravatar--large":e.variant==="large"}])},[R(y(e.name.charAt(0))+" ",1),e.email?(r(),l("img",{key:0,src:`https://www.gravatar.com/avatar/${c(o)}?s=${e.size}`,alt:e.name},null,8,Xs)):$("",!0)],2))}};var Qs=g(Ys,[["__scopeId","data-v-34c63ab6"]]);const eo={class:"tour-author"},to={class:"tour-author__body"},so={class:"tour-author__name"},oo={class:"tour-author__title"},ao={props:{author:z({name:b().isRequired,email:b().isRequired,title:b().def("Tour Guide"),institution:b()})},setup(e){return(t,s)=>(r(),l("div",eo,[h(Qs,{class:"tour-author__img",email:e.author.email,name:e.author.name},null,8,["email","name"]),u("div",to,[u("p",so,y(e.author.name),1),u("p",oo,y(e.author.title),1)])]))}};var no=g(ao,[["__scopeId","data-v-486aa66a"]]);const ro=e=>(N("data-v-1a603bbc"),e=e(),O(),e),lo={class:"language-stage"},co=ro(()=>u("h3",null,"Language",-1)),uo=["value","checked","onChange"],io=R("Save"),_o={props:{locale:{type:String,required:!0},locales:te(b())},emits:["setLocale"],setup(e,{emit:t}){const o=k(e.locale),a=i=>{o.value=i},n=i=>t("setLocale",i);return(i,p)=>(r(),l("div",lo,[e.locales.length>1?(r(),l("form",{key:0,class:"lanugage-stage__form",onSubmit:p[0]||(p[0]=Ge(v=>n(o.value),["prevent"]))},[co,(r(!0),l(L,null,M(e.locales,(v,_)=>(r(),l("label",{key:_,class:"input-group"},[u("input",{name:"locale",type:"radio",value:v,checked:o.value===v,onChange:d=>a(v)},null,40,uo),R(" "+y(e.locale),1)]))),128)),h(G,{class:"save-button",type:"submit",variant:"primary"},{default:f(()=>[io]),_:1})],32)):$("",!0)]))}};var po=g(_o,[["__scopeId","data-v-1a603bbc"]]);const vo={setup(e){const{locale:t,setLocale:s}=j(),{tourLocales:o}=Ot();return(a,n)=>(r(),S(po,{locale:c(t),locales:c(o),onSetLocale:c(s)},null,8,["locale","locales","onSetLocale"]))}};var mo=g(vo,[["__scopeId","data-v-2fbf05b7"]]);const go=["innerHTML"],Me={props:{content:b().def("")},setup(e){const t=e,s=ee(Ke.parse,Je.sanitize),o=m(()=>s(t.content));return(a,n)=>(r(),l("div",{class:"markdown",innerHTML:c(o)},null,8,go))}};const ho={class:"guide-stage"},fo={props:{stage:z().loose,locale:{type:String,default:"en"}},setup(e){const t=e,s=m(()=>t.stage.text[t.locale]);return(o,a)=>(r(),l("div",ho,[h(Me,{content:c(s)},null,8,["content"])]))}};var yo=g(fo,[["__scopeId","data-v-4a6966e8"]]);const So={class:"separator-stage"},$o={props:{stage:z({text:D().def({en:""})}).loose,locale:b().isRequired},setup(e){const t=e,s=m(()=>t.stage.text[t.locale]);return(o,a)=>(r(),l("h3",So,y(c(s)),1))}};var bo=g($o,[["__scopeId","data-v-10a6ebf9"]]);const xo={class:"navigation-stage"},ko=R(" Show Map "),Io={key:1,class:"navigation-stage__tour-map-wrapper"},To={props:{stage:z().loose,locale:b().isRequired,hasShowMapToggle:se().def(!0)},setup(e){const t=e,s=m(()=>t.stage.text[t.locale]),{stopIndex:o}=V(),a=k(!t.hasShowMapToggle),n=()=>a.value=!a.value;return(i,p)=>(r(),l("div",xo,[h(Me,{content:c(s)},null,8,["content"]),e.hasShowMapToggle?(r(),S(G,{key:0,icon:"map",onClick:n},{default:f(()=>[ko]),_:1})):$("",!0),a.value?(r(),l("div",Io,[h(we,{initialMapStyle:"streets",type:"stop",stopIndex:c(o)},null,8,["stopIndex"])])):$("",!0)]))}};const wo={class:"gallery-stage"},Lo={class:"gallery-stage__thumbnails"},Mo=["onClick"],Ro={class:"gallery-stage__figure-image-wrap"},Ao=["src","alt"],Co={key:0,class:"gallery-stage__figure-figcaption"},Po={props:{stage:{type:Object,required:!0},locale:{type:String,default:"en"}},setup(e){const t=e,s=k(0),o=m(()=>t.stage.images.map(p=>({src:`${E.imageStorageBase}/${p.src}`,alt:p.text[t.locale],title:p.text[t.locale]}))),a=k(!1),n=p=>{s.value=p,a.value=!0},i=()=>{a.value=!1};return(p,v)=>(r(),l("div",wo,[u("div",Lo,[(r(!0),l(L,null,M(c(o),(_,d)=>(r(),l("figure",{key:d,class:"gallery__figure",onClick:x=>n(d)},[u("div",Ro,[u("img",{src:_.src,alt:_.alt,loading:"lazy"},null,8,Ao)]),_.title?(r(),l("figcaption",Co,y(_.title),1)):$("",!0)],8,Mo))),128)),h(c(We),{scrollDisabled:"",escDisabled:"",moveDisabled:"",loop:"",visible:a.value,imgs:c(o),index:s.value,teleport:"body",onHide:i},null,8,["visible","imgs","index"])])]))}};var Bo=g(Po,[["__scopeId","data-v-85d8edea"]]);const Eo={class:"ar-stage"},No=R("Look Around"),Oo=["src"],qo={props:{stage:D().isRequired,simulateLocation:se().def(!1),locale:b().def("en")},setup(e){const t=e,{tour:s}=U(),{stopIndex:o}=V(),a=k(!1);function n(){console.log("toggleShowAr"),a.value=!a.value}const i=m(()=>`${E.apiBaseUrl}/ar/${s.value.id}/${o.value}/English/${t.simulateLocation}`);return(p,v)=>(r(),l("div",Eo,[h(G,{icon:"travel_explore",onClick:n},{default:f(()=>[No]),_:1}),a.value?(r(),l("iframe",{key:0,class:"ar-iframe",src:c(i),frameborder:"0",width:"100%",height:"100%"},`
      Loading AR...
    `,8,Oo)):$("",!0)]))}};const Ho={props:["stage"],computed:{source(){return this.stage.source}}},Fo={class:"embed-frame"},zo={key:0},Do=["src"];function Uo(e,t,s,o,a,n){return r(),l("div",Fo,[s.stage?(r(),l("div",zo,[u("iframe",{width:"640",height:"360",src:n.source,title:"Embedded Player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Do)])):$("",!0)])}var Vo=g(Ho,[["render",Uo],["__scopeId","data-v-115174da"]]);const jo={key:1,class:"stage-unknown"},Go={props:{stage:{type:Object,required:!0}},setup(e){const t=e,s={language:mo,guide:yo,separator:bo,navigation:To,gallery:Bo,ar:qo,"embed-frame":Vo},o=m(()=>s[t.stage.type]);return(a,n)=>c(o)?(r(),S(Ze(c(o)),{key:0,stage:e.stage},null,8,["stage"])):(r(),l("div",jo,[u("h3",null,y(e.stage.type),1),u("pre",null,y(e.stage),1)]))}};var Jo=g(Go,[["__scopeId","data-v-26d3fe56"]]);const Ko={class:"tour-stop"},Wo={class:"tour-stop__stages container"},Zo={class:"tour-stop__contents"},Xo={key:0},Yo=R(" Continue "),Qo={props:{stopIndex:T().def(0),stop:D().isRequired,isLastStop:se().def(!1)},setup(e){const t=e,{tour:s}=U(),{locale:o}=j(),a=m(()=>t.stopIndex===0),n=m(()=>{var v,_;return(_=(v=t.stop)==null?void 0:v.stop_content)==null?void 0:_.stages})||[],i=m(()=>{var _,d;const v=(d=(_=t.stop)==null?void 0:_.stop_content)==null?void 0:d.header_image;return v?`${E.apiBaseUrl}${v.src}`:null}),p=m(()=>{var _,d;const v=(d=(_=t.stop)==null?void 0:_.stop_content)==null?void 0:d.header_image;return v?v.alt:null});return(v,_)=>(r(),l("div",Ko,[h(Le,{title:c(a)?c(s).title:e.stop.stop_content.title[c(o)],subtitle:c(s).subtitle||"",stopNumber:e.stopIndex+1,imageSrc:c(i),imageAlt:c(p)},{default:f(()=>[c(a)&&c(s).author?(r(),S(no,{key:0,author:c(s).author},null,8,["author"])):$("",!0)]),_:1},8,["title","subtitle","stopNumber","imageSrc","imageAlt"]),u("div",Wo,[u("div",Zo,[c(a)?(r(),l("h2",Xo,"Start")):$("",!0),(r(!0),l(L,null,M(c(n),d=>(r(),l("section",{key:`${e.stop.id}-${d.id}`},[h(Jo,{stage:d,locale:c(o)},null,8,["stage","locale"])]))),128)),e.isLastStop?$("",!0):(r(),S(G,{key:1,icon:"arrow_forward",iconPosition:"end",variant:"primary",onClick:_[0]||(_[0]=d=>v.$router.push(`/tours/${c(s).id}/stops/${e.stopIndex+1}`))},{default:f(()=>[Yo]),_:1}))])])]))}};var ea=g(Qo,[["__scopeId","data-v-3a531655"]]);const ta={props:{tour:D().isRequired,stopIndex:T().def(0),locale:b().isRequired},setup(e){const t=e,s=k(null),o=Xe();function a(i){s.value=i}function n(i){Qe(()=>{o.push(`/tours/${t.tour.id}/stops/${i.activeIndex}`)})}return B(()=>t.stopIndex,()=>{!s.value||s.value.slideTo(t.stopIndex,0)}),(i,p)=>(r(),S(c(Ye),{"slides-per-view":1,"space-between":16,initialSlide:e.stopIndex,onSwiper:a,onSlideChangeTransitionEnd:n},{default:f(()=>[(r(!0),l(L,null,M(e.tour.stops,(v,_)=>(r(),S(c(et),{key:_,autoHeight:!0},{default:f(()=>[e.stopIndex===_?(r(),S(ea,{key:0,stop:v,stopIndex:_},null,8,["stop","stopIndex"])):(r(),S(Zs,{key:1,tour:e.tour,stopIndex:_,locale:e.locale},null,8,["tour","stopIndex","locale"]))]),_:2},1024))),128))]),_:1},8,["initialSlide"]))}};const sa={class:"tour-page"},oa={key:0,class:"loading"},aa={key:1},na={setup(e){const t=F(),{stopIndex:s}=V(),{tour:o}=U(),{locale:a}=j(),n=m(()=>t.state.isLoading);return ce(()=>{t.dispatch("fetchTour",t.state.route.params.tourId)}),(i,p)=>(r(),l("div",sa,[h(xe,null,{default:f(()=>[c(n)?(r(),l("div",oa,"Loading...")):$("",!0),c(n)?$("",!0):(r(),l("div",aa,[h(ta,{tour:c(o),stopIndex:c(s),locale:c(a)},null,8,["tour","stopIndex","locale"])])),c(n)?$("",!0):(r(),S(qs,{key:2}))]),_:1})]))}};var ra=g(na,[["__scopeId","data-v-12d1d317"]]);const la={};function ca(e,t){return r(),l("h1",null,"Settings Page")}var ua=g(la,[["render",ca]]);const ia={};function _a(e,t){return r(),l("h1",null,"Help Page")}var pa=g(ia,[["render",_a]]);const da=[{path:"/",component:wt},{path:"/tours/:tourId/stops/:stopIndex",component:ra},{path:"/settings",component:ua},{path:"/help",component:pa}],Re=tt({history:st(E.baseDir),routes:da,scrollBehavior(e,t,s){return s||{top:0}}}),$e=e=>Number.parseInt(e,10),va={tour:null,isLoading:!0,locale:"en",errors:[]},ma={allStops(e){const{tour:t}=e;return t?t.stops:[]},totalStops(e){return e.tour?e.tour.stops.length:0},stopIndex(e){return $e(e.route.params.stopIndex||0)},tourId(e){return $e(e.route.params.tourId)},isFirstStop(e,t){return t.stopIndex===0},isLastStop(e,t){return t.stopIndex===t.totalStops-1},currentStop(e,t){var s;return((s=t.allStops)==null?void 0:s[t.stopIndex])||null},nextStop(e,t){return t.isLastStop?null:e.getters.allStops[t.stopIndex+1]},previousStop(e,t){return t.isFirstStop?null:e.getters.allStops[t.stopIndex-1]}},ga={fetchTourStarted(e){e.isLoading=!0},fetchTourSucceeded(e,t){e.isLoading=!1,e.tour=t},fetchTourFailed(e,t){e.isLoading=!1,e.errors.push(t)},setLocale(e,t){e.locale=t}},ha={fetchTour({commit:e},t){e("fetchTourStarted"),_e.get(t).then(s=>{e("fetchTourSucceeded",s)}).catch(s=>{console.error(s),e("fetchTourFailed",s)})},setLocale({commit:e},t){e("setLocale",t)}},fa={state:()=>va,getters:ma,mutations:ga,actions:ha,plugins:[ot()]},Ae=at(fa);nt(Ae,Re);const ya=rt(it);ya.use(Re).use(Ae).mount("#app");
//# sourceMappingURL=index.973552e6.js.map
